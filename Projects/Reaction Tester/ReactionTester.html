<!doctype html>

<html lang="en-US">

	<head>
		<title>Some JavaScript Tutorial</title>
		<meta charset="utf-8">
		<meta name="viewport" width="device-width, initial-scale=1">
		<style>
		#box {
			width:200px;
			height:200px;
			background: red;
			box-sizing:border-box;
			display: none;
			position:relative;
			cursor:pointer;
		}
			p {
				color:black;
				font-size:1.2em;
				font-family: tahoma;
				font-weight:bold;
			}
			p span#result {
				background: red;
				color:white;
			}
			#counter {
				color:black;
				font-weight:700;
				font-family: verdana;
				font-size:1.5em;
			}
		</style> 
	</head>

	<body>
	<p id="apotelesma">Your time is:<span id="result"></span></p>
	<article id="counter"></article><br>
	<article id="test"></article>
	<article id="box"></article>
		<script>
		'use strict';

		var createdTime, clickedTime, reactionTime, z = 1, results = [], target = document.getElementById('box');

		function getRandom() {
		var letters = '0123456789ABCDEF'.split('');
		var color = '#';
		for (var i = 1; i <= 6; i++) {
			color = color + letters[Math.round(Math.random() * 15)];
		}
		return color;
	}

	function appearBox() {
		var x = Math.random();
		x = x * 3000;
		setTimeout(function() {
			if (x < 2000) {
				target.style.borderRadius = '100px';
			}
			else {
				target.style.borderRadius = '0px';
			}
			var top = Math.random();
			top = top * 500;
			var left = Math.random();
			left = left * 600;
			target.style.top = top + 'px';
			target.style.left = left + 'px';
			target.style.backgroundColor = getRandom();
			target.style.display = 'block';
			createdTime = Date.now();
		}, x)
	}
	 
	  target.onclick = function() {
	  	if (z < 5) {
		clickedTime = Date.now();
		reactionTime = (clickedTime - createdTime) / 1000;
		this.style.display = 'none';
		appearBox();
		document.getElementById('result').innerHTML = reactionTime;
		results.push(reactionTime);
		results.sort(function(a, b) {
			return a - b;
		});
		document.getElementById('counter').innerHTML = 'You have ' + (5 - z) + ' tries left!';
		z++;
		} else {
			clickedTime = Date.now();
			reactionTime = (clickedTime - createdTime) / 1000;
			this.style.display = 'none';
			document.getElementById('result').innerHTML = reactionTime;
			results.push(reactionTime);
			results.sort(function(a, b) {
				return a - b;
			});
			document.getElementById('counter').innerHTML = 'Game over!!';
			document.getElementById('apotelesma').innerHTML = 'Your best reaction was ' + results[0];
		}
	}

			
	appearBox(); 
	</script>
	</body>

</html>